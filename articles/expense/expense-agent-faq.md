---
title: Dynamics 365 Expense agent FAQ
description: This article provides answers to frequently asked questions about the Dynamics 365 Expense agent.
author: alexeiantao
ms.date: 04/30/2025
ms.topic: how-to
ms.custom: 
  - bap-template
ms.reviewer: johnmichalak
ms.author: alexeiantao
---

# Expense agent FAQ

[!INCLUDE[banner](../includes/banner.md)]

This article provides answers to frequently asked questions about the Dynamics 365 Expense agent. It also describes known issues that affect the agent and explains how to work around them.

## Agent Enablement and Configuration

### How do I disable the agent if needed?  
To enable/disable the agent, go to the configuration page within Expense Management parameters.

### Can I enable the agent for select legal entities and provide custom configurations? 
Yes, the agent can be turned off for select legal entities. Configurations are unique per legal entity.

### I can't see the Expense Entry Agent in Expense Management parameters within Finance and Operations. Why? 
Expense Entry Agent is available from version 10.0.44. Enable the feature **(Production Ready Preview)** 'Agent Management' from **Workspaces > Feature Management**.

### I can't see the Expense Entry Solution.
The solution is part of the Finance and Operations Copilot package (v1.0.3033.5+). Update it from PPAC. Refer to the Copilot documentation for more details.


## Setup and Configuration

### How do I update the shared mailbox address ID for Expense usage?  
Update the variable in **DefaultSolution** and publish all customizations.

### How do I update environment variables? 
Go to **DefaultSolution** in Maker portal and update:
  - `Expense agent Shared Mailbox Id`  
  - `Finance and Operations Instance Url`  
  - `Expense agent Shared Mailbox Address Id`

### I don’t know which connectors are used for Expense agent. How do I add them?  
Expense agent uses the following connectors:
  - Microsoft Copilot Studio  
  - Dataverse  
  - Office 365 Users  
  - Office 365 Outlook  
  - Microsoft Teams  

Go to the **Maker Portal**, select your environment, navigate to **Connections > New connection**, and select the connector.

### Data Loss Prevention policy blocks connector access. What should I do? 
Ensure the connectors are in the **Business** group and allowlisted.


## Agent Execution

### The Expense agent isn't processing my email receipts.  
Ensure you're part of the correct legal entity and have active employment. Also verify that the agent is enabled for that legal entity.

### I have followed the setup steps and have the required permissions, but the emails are still not processed.
You may need to republish agents:
  - Go to **Power Apps**  
  - Select **Environment > Agents > 'Expense Entry Agent (Preview)'** and **'ExpenseAgent-Line (Preview)'**  
  - Publish both agents  
  - Publish the solution **'(Production Ready Preview) Time and Expense agent'**

### Power Automate flows stopped working.  
  Flows may be in a disabled state due to repeated failures. Turn them on manually. Some connections may need reauthentication—reconnect them.

### Flows are running, but expenses aren't processed. 
Possible causes:
  - Expense agent not activated for legal entity  
  - Users not having employment in legal entity  
  - Disconnected connectors  
  - Missing Copilot Studio license

### Updated Outlook folder, but agent still uses old folder.
Reconnect **Office 365 Outlook** connector and republish the solution.

## Email and Receipt Processing

### What file formats and sizes are supported by the agent? 
Agent supports **JPEG, PNG, and PDF**. Recommended size is under **2MB**. Larger sizes supported only for JPEG and PDF.

### Does the agent support multiple receipts in one email?  
Yes.

### Can the agent read receipts embedded in the email body?  
No.

### My receipt isn’t being processed, though I have active employment and connections. 
Check if the receipt format and size are correct. Supported types: **JPEG, PNG, PDF**. Recommended size: **< 2MB**.

### How do I know if an expense was created by the agent?  
Add the **'Expense Generated by'** column in the web app’s **Expense Reports** screen.

### I can’t view the expense line for a forwarded receipt in the web application. 
Processing can take **1–24 hours**. Lines appear in reports, not in unattached expenses.

### How do I know if my receipt was processed?  
Processed receipts are grouped into reports in the web application and displayed in Microsoft Teams. Errors trigger a fallback card with information about the failure.

### I can't detach an expense line from a one-line adaptive card report.  
The agent doesn't allow detaching the only line. Use the **web application** to delete the report.



## Microsoft Teams Integration

### I can’t see the adaptive card for Expense in Teams. 
Ensure the **'Expense Entry Agent (Preview)'** Teams app is installed.

### I select the adaptive card button but get no response.  
There’s a **1-day timeout**. You can act on the next card or use the web application.

[!INCLUDE[footer-include](../includes/footer-banner.md)]
